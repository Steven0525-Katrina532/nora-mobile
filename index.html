<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NORA Mobile</title>
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js').catch(()=>{});
      });
    }
  </script>
  <style>
    :root{
      --bg:#2bc1c6; --header:#000000; --card:#141517; --border:#2a2d33; --text:#ffffff;
      --muted:#dfe6ea; --accent:#4f46e5; --chip:#1c1d21; --chipBorder:#2a2d33;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px system-ui,-apple-system,Segoe UI,Roboto,Arial}
    a{color:inherit;text-decoration:none}

    .header{
      position:sticky; top:0; z-index:20; background:var(--header); color:#e9f9f9;
      padding: clamp(14px, 2.4vw, 22px) clamp(16px, 2.5vw, 28px);
      display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #0f0f0f;
    }
    .h-left{display:flex; align-items:center; gap: clamp(10px, 1.5vw, 16px)}
    .logo{height: clamp(40px, 6vw, 64px); width:auto; display:block}
    .brand{font-size: clamp(24px, 5vw, 44px); font-weight:900; letter-spacing:.6px}
    .phone{
      display:inline-flex; align-items:center; gap: clamp(6px, 1vw, 12px);
      background:#ffffff; color:#0b3d3f; border-radius:12px;
      padding: clamp(8px, 1.5vw, 14px) clamp(12px, 2vw, 18px);
      font-weight:800; font-size: clamp(14px, 2.4vw, 20px); box-shadow:0 2px 8px rgb(0 0 0 / .25);
    }
    .phone .icon{font-style:normal; font-size: inherit}

    .wrap{max-width: clamp(320px, 92vw, 900px); margin:0 auto; padding: clamp(12px, 3vw, 22px) clamp(12px, 3vw, 22px) 48px;}
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding: clamp(12px, 2.5vw, 20px); box-shadow:0 2px 10px rgb(0 0 0 /.25)}
    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    @media(min-width:680px){ .grid.cols-2{grid-template-columns:1fr 1fr} .grid.cols-3{grid-template-columns:1fr 1fr 1fr}}
    label{display:block; color:#cfe5ea; font-weight:700; margin:6px 2px}
    input,select,textarea,button{width:100%; border-radius:12px; border:1px solid var(--border); background:#16171a; color:#fff; padding:12px 14px}
    textarea{min-height:96px; resize:vertical}
    .inline{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
    .inline label{margin:0}
    .btn{background:var(--accent); font-weight:800; cursor:pointer}
    .btn:active{transform:scale(.98)}
    .hint{color:#0b3d3f; font-weight:700; text-align:center; margin-top:12px}
    .confirm-note{ color:#ffffff; font-size:13px; text-align:center; margin-top:10px; font-weight:800 }
    .danger{color:#ffb4b4}
    .checkbox{width:auto; accent-color:#4f46e5}
  /* === High-contrast time input === */
input[type="time"]{ color:#ffffff; caret-color:#ffffff }
input[type="time"]::-webkit-calendar-picker-indicator{ filter: invert(1) brightness(1.8); opacity:0.9 }
input[type="time"]::-webkit-datetime-edit{ color:#ffffff }
input[type="time"]::-webkit-datetime-edit-text,
input[type="time"]::-webkit-datetime-edit-hour-field,
input[type="time"]::-webkit-datetime-edit-minute-field,
input[type="time"]::-webkit-datetime-edit-second-field,
input[type="time"]::-webkit-datetime-edit-ampm-field{ color:#ffffff }
  /* === Mobile input width + overflow fixes === */
.grid > div { min-width: 0 }                 /* allow grid items to shrink */
input, select, textarea {
  width: 100%;
  max-width: 100%;
  min-width: 0;                              /* iOS: prevent UA min-width overflow */
}

/* iOS Safari tends to make date/time wider; clamp them */
input[type="date"],
input[type="time"] {
  width: 100%;
  max-width: 100%;
  min-width: 0;
  display: block;
}

/* Uniform control height to match TZ select */
input, select { height: 48px }               /* adjust if you want 44/52 later */

/* iOS zoom quirk: keep font-size >=16px so it won't auto-zoom the field */
@supports (-webkit-touch-callout: none) {
  input, select { font-size: 16px }
}
  /* MOBILE PATCH v1 */
*, *::before, *::after { box-sizing: border-box; }
form input[type='text'], form input[type='tel'], form input[type='email'],
form input[type='date'], form input[type='time'], form input[type='number'],
form select, form textarea {
  width:100%; max-width:100%; display:block; height:48px;
  padding:0.6rem 0.8rem; border-radius:12px; font-size:16px; line-height:1.2;
  -webkit-appearance:none; appearance:none; margin:8px 0;
}
.form-card,.card { padding:16px; border-radius:16px; overflow:hidden; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:600px){ .form-row{ grid-template-columns:1fr; } }
#pickupDate,#pickupTime,#orTime,#callerPhone{ width:100%; max-width:100%; height:48px; }

/* === NORA THEME – SHINE PATCH v1 === */
:root{
  --nora-teal: #18b39d; --nora-teal-2: #0fa58f; --nora-teal-3: #0b8f7b;
  --nora-dark: #000000; --nora-surface: rgba(255,255,255,0.07);
  --nora-border: rgba(255,255,255,0.12); --nora-text: #ffffff;
  --nora-muted: rgba(255,255,255,0.75); --focus-ring: rgba(24,179,157,0.35);
}
html, body { height:100%; }
body{
  background:#000; color:var(--nora-text);
  font-family:"Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
  line-height:1.5; padding:12px;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

.card, .form-card, .panel, .sheet{
  background:var(--nora-surface); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
  border:1px solid var(--nora-border); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.25);
  padding:16px; max-width:100%; overflow:hidden;
}
/* Field normalization (keeps your mobile fixes) */
form input[type='text'], form input[type='tel'], form input[type='email'],
form input[type='date'], form input[type='time'], form input[type='number'],
form select, form textarea{
  width:100%; max-width:100%; display:block; height:48px; padding:0.6rem 0.8rem;
  border-radius:12px; font-size:16px; line-height:1.2; margin:8px 0;
  -webkit-appearance:none; appearance:none;
  border:1px solid var(--nora-border); background:rgba(255,255,255,0.06); color:var(--nora-text);
  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
}
form input::placeholder, form textarea::placeholder { color: rgba(255,255,255,0.55); }
form input:focus, form select:focus, form textarea:focus{
  outline:none; border-color:var(--nora-teal); box-shadow:0 0 0 3px var(--focus-ring); background:rgba(255,255,255,0.09);
}
form label{ color:var(--nora-muted); font-weight:600; margin:4px 0 6px; display:block; }
.form-row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:600px){ .form-row{ grid-template-columns:1fr; } }
#pickupDate, #pickupTime, #orTime, #callerPhone { width:100%; max-width:100%; height:48px; }
button, .btn, input[type="submit"]{
  background:var(--nora-teal); color:#fff; border:none; border-radius:12px; height:48px; padding:0 16px;
  font-weight:700; letter-spacing:.02em; cursor:pointer; transition:transform .12s, box-shadow .12s, background .12s;
}
button:hover, .btn:hover, input[type="submit"]:hover{
  background:var(--nora-teal-2); transform:translateY(-1px); box-shadow:0 6px 16px rgba(24,179,157,0.35);
}
button:active, .btn:active, input[type="submit"]:active{
  background:var(--nora-teal-3); transform:translateY(0); box-shadow:0 2px 8px rgba(0,0,0,0.35);
}
button:focus-visible, .btn:focus-visible, input[type="submit"]:focus-visible{ outline:none; box-shadow:0 0 0 3px var(--focus-ring); }
a{ color:var(--nora-teal); text-decoration:none; } a:hover{ text-decoration:underline; }
.section, .section--green, .section--blue{ padding:12px; overflow:hidden; border-radius:12px; }
.small, small{ color:rgba(255,255,255,.7); }
@media (prefers-reduced-motion:reduce){ *{ transition:none!important; animation:none!important; } }

/* === NORA TEAL ACCENTS v1 === */
:root { --banner-h: 56px; --rail-w: 6px; }

body{
  /* Add space for fixed banner; keeps previous padding but adds banner height + iOS safe area */
  padding-top: calc(12px + var(--banner-h) + env(safe-area-inset-top));
  padding-bottom: calc(12px + 10px + env(safe-area-inset-bottom)); /* 10px bottom strip */
}

/* Fixed top banner (pure color bar; doesn't block clicks) */
.nora-banner{
  position: fixed; inset: 0 0 auto 0; height: var(--banner-h);
  background: linear-gradient(90deg, #0b8f7b, #18b39d 40%, #0fa58f);
  box-shadow: 0 4px 18px rgba(0,0,0,.35);
  z-index: 9998; pointer-events: none;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}

/* Thin bottom strip accent */
.nora-bottom{
  position: fixed; inset: auto 0 0 0; height: 10px;
  background: linear-gradient(90deg, #0fa58f, #18b39d, #0b8f7b);
  box-shadow: 0 -2px 12px rgba(0,0,0,.30);
  z-index: 9998; pointer-events: none;
  border-top: 1px solid rgba(255,255,255,0.10);
}

/* Optional side rails on large screens only */
@media (min-width: 960px){
  .nora-side{
    position: fixed; top: calc(var(--banner-h) + 6px); bottom: 16px; width: var(--rail-w);
    background: linear-gradient(#18b39d44, #18b39d88, #18b39d44);
    border-radius: 4px; pointer-events: none; z-index: 9997;
    box-shadow: 0 0 10px #18b39d55;
  }
  .nora-side.nora-left{ left: 12px; }
  .nora-side.nora-right{ right: 12px; }
}

/* === NORA – Header & Form Frame v1 === */

/* Reset the paddings we added before so header is not hidden */
body { padding-top: 12px !important; padding-bottom: 12px !important; background:#000 !important; }

/* If there's a site header, make it white with dark text (non-destructive) */
header, .site-header, .topbar {
  background:#fff !important;
  color:#000 !important;
  border-bottom: 3px solid #18b39d !important; /* thin teal accent under the white header */
}

/* Form frame: teal border + subtle glow on black surface */
form {
  background: #0b0b0b !important;
  border: 2px solid #18b39d !important;
  border-radius: 16px !important;
  box-shadow: 0 0 0 1px rgba(24,179,157,0.35), 0 8px 28px rgba(24,179,157,0.18) !important;
  padding: 16px !important;
  max-width: 100% !important;
}

/* Labels: bright white for readability */
form label {
  color: #ffffff !important;
  font-weight: 700 !important;
}

/* Required asterisk style */
.nora-req-asterisk { color:#ff6b6b; margin-left:4px; font-weight:800; }

/* Inputs keep the earlier normalization and focus, but ensure contrast on this black surface */
form input[type='text'], form input[type='tel'], form input[type='email'],
form input[type='date'], form input[type='time'], form input[type='number'],
form select, form textarea{
  background: rgba(255,255,255,0.06) !important;
  color: #fff !important;
  border: 1px solid rgba(255,255,255,0.22) !important;
}
form input::placeholder, form textarea::placeholder { color: rgba(255,255,255,0.65) !important; }
form input:focus, form select:focus, form textarea:focus{
  border-color: #18b39d !important;
  box-shadow: 0 0 0 3px rgba(24,179,157,0.35) !important;
}

/* Keep our mobile grid behavior */
.form-row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:600px){ .form-row{ grid-template-columns:1fr; } }
</style>

    <link rel="apple-touch-icon" sizes="180x180" href="/nora-mobile/apple-touch-icon-180.png?v=20251029192447">
<link rel="apple-touch-icon" href="/nora-mobile/apple-touch-icon.png?v=20251029192447">
<link rel="icon" href="/nora-mobile/icons/icon-192.png?v=20251029192447" sizes="192x192">
<link rel="icon" href="/nora-mobile/icons/icon-512.png?v=20251029192447" sizes="512x512">
<link rel="manifest" href="/nora-mobile/manifest.webmanifest?v=20251029192447">
<meta name="theme-color" content="#1a73e8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<style id="nora-clean-v7">
:root{
  --nora-teal:#18b39d;
  --nora-teal-dark:#0fa58f;
  --bg:#000000;
  --panel:#0b0b0b;
  --focus:rgba(24,179,157,0.35);
}

/* Keep page black */
body{ background:var(--bg); color:#fff; font-family:"Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif; }

/* === Sticky teal behind existing header row (NORA + phone) === */
.nora-header-teal{
  position: sticky; top: 0; z-index: 1000;
  background: var(--nora-teal);   /* teal background behind header */
  color: #fff;
  padding: 10px 16px;             /* modest height, readable, not huge */
  box-shadow: 0 2px 10px rgba(0,0,0,.25);
}
.nora-header-teal .brand, .nora-header-teal h1{
  margin:0; font-weight:900; letter-spacing:.02em;
  font-size: clamp(26px, 3.6vw, 38px);
  color:#fff;
}
.nora-header-teal a[href^="tel:"],
.nora-header-teal .call, .nora-header-teal .call-link{
  display:inline-flex; align-items:center; gap:10px;
  background:#ffffff; color:#0b8f7b; text-decoration:none;
  padding: 10px 16px; border-radius:14px; font-weight:900;
  box-shadow: 0 2px 8px rgba(0,0,0,.25);
}

/* === Form panel: ONE teal line, slightly thicker; no inner line, no glow === */
.nora-frame{
  background: var(--panel);
  border: 5px solid var(--nora-teal);   /* thicker single line */
  border-radius: 20px;
  box-shadow: none;                     /* kill inner/outer glow */
  padding: 18px;
  margin: 12px auto 24px;
  max-width: 1100px;
}

/* Labels bright white */
.nora-frame label{
  color:#ffffff; font-weight:800; font-size:15.5px;
}

/* Inputs high contrast + teal focus */
.nora-frame input[type="text"], .nora-frame input[type="tel"], .nora-frame input[type="email"],
.nora-frame input[type="date"], .nora-frame input[type="time"], .nora-frame input[type="number"],
.nora-frame select, .nora-frame textarea{
  background:#141414; color:#fff; border:1px solid rgba(255,255,255,0.22);
  height:48px; border-radius:12px; font-size:16px;
}
.nora-frame input::placeholder, .nora-frame textarea::placeholder{ color:rgba(255,255,255,.72); }
.nora-frame input:focus, .nora-frame select:focus, .nora-frame textarea:focus{
  border-color: var(--nora-teal); box-shadow: 0 0 0 3px var(--focus); outline:none;
}

/* Keep mobile stacking tidy */
.nora-frame .form-row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:600px){ .nora-frame .form-row{ grid-template-columns:1fr; } }

/* Submit: flat teal */
.nora-frame button, .nora-frame .btn, .nora-frame input[type="submit"]{
  background:var(--nora-teal); color:#000; border:none; height:48px; border-radius:12px; padding:0 16px;
  font-weight:900; letter-spacing:.02em; cursor:pointer;
}
.nora-frame button:hover, .nora-frame .btn:hover, .nora-frame input[type="submit"]:hover{
  background:var(--nora-teal-dark);
}

/* Required star we added earlier */
.nora-req-asterisk{ color:#ff6b6b; font-weight:900; margin-left:4px; }
</style>
<style id="nora-trim-v8">
:root{
  --nora-teal:#18b39d;
  --panel:#0b0b0b;
  --focus:rgba(24,179,157,0.35);
}

/* 0) Nuke any page/outer borders that might be hanging around */
html, body, .page, .site, .container, .wrap, .wrapper {
  border: 0 !important;
  outline: none !important;
  box-shadow: none !important;
}

/* 1) Remove OUTER panel border/shadow so only the inner line remains */
.nora-frame{
  background: var(--panel) !important;
  border: 0 !important;          /* kill second line */
  box-shadow: none !important;   /* kill glow/rim */
  border-radius: 0 !important;   /* let the form's own radius define shape */
  padding: 0 !important;         /* form will carry its own padding */
  margin: 0 auto 24px !important;
  max-width: 1100px !important;
}

/* 2) Put the SINGLE teal border on the FORM itself */
.nora-frame > form, form.nora-inner {
  background: var(--panel) !important;
  border: 5px solid var(--nora-teal) !important;   /* single thicker line */
  border-radius: 20px !important;
  padding: 18px !important;
}

/* Safety: remove any fieldset borders that could look like a second line */
.nora-frame form fieldset { border: 0 !important; }

/* Labels high-contrast */
.nora-frame form label { color:#fff !important; font-weight:800 !important; font-size:15.5px !important; }

/* Inputs (same great contrast + teal focus) */
.nora-frame form input[type="text"],
.nora-frame form input[type="tel"],
.nora-frame form input[type="email"],
.nora-frame form input[type="date"],
.nora-frame form input[type="time"],
.nora-frame form input[type="number"],
.nora-frame form select,
.nora-frame form textarea{
  background:#141414 !important; color:#fff !important;
  border:1px solid rgba(255,255,255,0.22) !important;
  height:48px !important; border-radius:12px !important; font-size:16px !important;
}
.nora-frame form input:focus,
.nora-frame form select:focus,
.nora-frame form textarea:focus{
  border-color: var(--nora-teal) !important;
  box-shadow: 0 0 0 3px var(--focus) !important;
  outline:none !important;
}

/* Keep mobile stacking */
.nora-frame form .form-row{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:600px){ .nora-frame form .form-row{ grid-template-columns:1fr; } }
</style>
</head>
<body>
<div class="header">
    <div class="h-left">
      <img src="icons/nora-logo.png" alt="NORA" class="logo" onerror="this.style.display='none'">
      <div class="brand">NORA</div>
    </div>
    <a class="phone" href="tel:+18555546672" aria-label="Request a Dispatch"><i class="icon">📞</i> (855)-554-6672</a>
  </div>

  <div class="wrap">
    <div class="nora-frame"><form id="noraForm" class="card" novalidate>
      <div class="grid">
        <!-- Customer -->
        <div>
          <label for="customer">Customer</label>
          <input id="customer" name="customer" placeholder="Enter customer name" />
        </div>

        <!-- Caller -->
        <div class="grid cols-2">
          <div>
            <label for="callerName">Caller Name <span class="danger">*</span></label>
            <input id="callerName" name="callerName" required />
          </div>
          <div>
            <label for="callerNumber">Caller Phone Number <span class="danger">*</span></label>
            <input id="callerNumber" name="callerNumber" inputmode="tel" required />
          </div>
        </div>

        <!-- Date / Time / TZ -->
        <div class="grid cols-3">
          <div>
            <label for="date">Pick Up Date <span class="danger">*</span></label>
            <input id="date" name="date" type="date" required />
          </div>
          <div>
            <label for="pickUpTime">Pick Up Time <span class="danger">*</span></label>
            <input id="pickUpTime" name="pickUpTime" type="time" required />
          </div>
          <div>
            <label for="pickUpTimeZone">Time Zone <span class="danger">*</span></label>
            <select id="pickUpTimeZone" name="pickUpTimeZone" required>
              <option value="ET" selected>ET</option><option value="CT">CT</option><option value="MT">MT</option><option value="PT">PT</option>
            </select>
          </div>
        </div>

        <!-- UNOS / OR -->
        <div class="grid cols-3">
          <div>
            <label for="unosRef">UNOS or Ref#</label>
            <input id="unosRef" name="unosRef" />
          </div>
          <div>
            <label for="orTime">O.R. Time</label>
            <input id="orTime" name="orTime" type="time" />
          </div>
          <div>
            <label for="orTimeZone">O.R. Time Zone</label>
            <select id="orTimeZone" name="orTimeZone">
              <option value="">Select</option><option value="ET">ET</option><option value="CT">CT</option><option value="MT">MT</option><option value="PT">PT</option>
            </select>
          </div>
        </div>

        <div>
          <label for="secondaryCoordinator">Secondary Coordinator?</label>
          <input id="secondaryCoordinator" name="secondaryCoordinator" placeholder="Name, Number, Hand-off Time" />
        </div>

        <!-- Transport -->
        <div>
          <label for="whatTransporting">What are we transporting?</label>
          <select id="whatTransporting" name="whatTransporting">
            <option value="">Select</option>
            <option value="Organ">Organ</option>
            <option value="Blood/Tissue Samples">Blood/Tissue Samples</option>
            <option value="Equipment">Equipment</option>
            <option value="Teams — specify">Teams — specify</option>
            <option value="Other">Other</option>
          </select>
          <input id="whatTransportingOther" name="whatTransportingOther" placeholder="If Teams/Other, enter details" style="display:none; margin-top:8px">
        </div>

        <!-- Pick Up Location + Wait & Return inline -->
        <div>
          <div class="inline" style="justify-content:space-between">
            <label for="pickUpLocation" style="flex:1 1 auto">Pick Up Location</label>
            <label style="display:flex; align-items:center; gap:8px; color:#ffffff">
              <input type="checkbox" class="checkbox" id="waitReturn" name="waitReturn" />
              Is this a Wait & Return?
            </label>
          </div>
          <textarea id="pickUpLocation" name="pickUpLocation" placeholder="Enter pickup location details"></textarea>
        </div>

        <!-- FBO / Tail Number / Arrival Time (same row) -->
        <div class="grid cols-3">
          <div>
            <label for="fbo">FBO</label>
            <input id="fbo" name="fbo" placeholder="e.g., Signature ATL" />
          </div>
          <div>
            <label for="tailNumber">Tail Number</label>
            <input id="tailNumber" name="tailNumber" placeholder="e.g., N123AB" />
          </div>
          <div>
            <label for="arrivalTime">Arrival Time</label>
            <input id="arrivalTime" name="arrivalTime" type="time" />
          </div>
        </div>

        <!-- Drop Off -->
        <div>
          <label for="dropOffLocation">Drop Off Location</label>
          <textarea id="dropOffLocation" name="dropOffLocation" placeholder="Enter drop off location details"></textarea>
        </div>

        <div class="grid cols-2">
          <div>
            <label for="doOnsiteContact">D/O Onsite Contact</label>
            <input id="doOnsiteContact" name="doOnsiteContact" />
          </div>
          <div>
            <label for="doOnsiteLocation">D/O Onsite Location</label>
            <input id="doOnsiteLocation" name="doOnsiteLocation" />
          </div>
        </div>

        <div>
          <label for="miscellaneousInfo">Miscellaneous Information</label>
          <textarea id="miscellaneousInfo" name="miscellaneousInfo" placeholder="Enter any additional information"></textarea>
        </div>

        <!-- Above Submit: Job Number needed? (white) -->
        <div class="inline" style="justify-content:flex-start; color:#ffffff">
          <label style="display:flex; align-items:center; gap:8px; color:#ffffff; font-weight:800">
            <input type="checkbox" class="checkbox" id="jobNumberNeeded" name="jobNumberNeeded" />
            Do you need a job number?
          </label>
        </div>

        <button id="submitBtn" class="btn" type="submit">Submit to Dispatch</button>
        <div class="confirm-note">
          After you press <b>Send</b> in your mail app, the confirmation will arrive in the
          <b>inbox of the email account you sent from</b>.
        </div>
      </div>
    </form></div>

    <div class="hint" style="margin-top:14px">
      <button id="clearBtn" type="button" style="background:none;border:1px solid var(--border);border-radius:10px;padding:6px 10px;color:#073c3e;cursor:pointer">Clear Saved Data</button>
    </div>
  </div>

  <script>
    const EMAIL = 'dispatch@noratrans.com'
    const KEY = 'nora-form-data-web'
    const form = document.getElementById('noraForm')
    const clearBtn = document.getElementById('clearBtn')

    // Transport “Other/Teams — specify” toggle
    const what = document.getElementById('whatTransporting')
    const whatOther = document.getElementById('whatTransportingOther')
    function toggleOther(){
      const v = what.value
      whatOther.style.display = (v === 'Other' || v.startsWith('Teams')) ? '' : 'none'
    }
    what.addEventListener('change', toggleOther)

    // Restore saved data
    try{
      const saved = JSON.parse(localStorage.getItem(KEY) || '{}')
      for(const [k,v] of Object.entries(saved)){
        const el = form.elements.namedItem(k)
        if(!el) continue
        if(el instanceof HTMLInputElement){
          if(el.type === 'checkbox'){ el.checked = (v === true || v === 'on' || v === 'true') }
          else { el.value = v }
        } else if(el instanceof HTMLTextAreaElement || el instanceof HTMLSelectElement){
          el.value = v
        }
      }
      toggleOther()
    }catch{}

    // Auto-save (including checkboxes)
    form.addEventListener('input', ()=>{
      const data = Object.fromEntries(new FormData(form).entries())
      // Capture unchecked checkboxes explicitly as false
      data.jobNumberNeeded = document.getElementById('jobNumberNeeded').checked
      data.waitReturn = document.getElementById('waitReturn').checked
      localStorage.setItem(KEY, JSON.stringify(data))
    })

    // Clear
    clearBtn.addEventListener('click', ()=>{
      localStorage.removeItem(KEY); form.reset(); toggleOther(); alert('Saved form data cleared.')
    })

    function fmtDate(iso){
      if(!iso) return 'Not provided'
      try{
        const d = new Date(iso)
        return new Intl.DateTimeFormat(undefined,{month:'2-digit',day:'2-digit',year:'numeric',weekday:'long'}).format(d)
      }catch{ return String(iso) }
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault()
      const data = Object.fromEntries(new FormData(form).entries())
      // read checkbox states
      const jobNeeded = document.getElementById('jobNumberNeeded').checked ? 'Yes' : 'No'
      const waitRet   = document.getElementById('waitReturn').checked ? 'Yes' : 'No'

      const missing=[]
      if(!data.callerName) missing.push('Caller Name')
      if(!data.callerNumber) missing.push('Caller Phone Number')
      if(!data.date) missing.push('Pick Up Date')
      if(!data.pickUpTime) missing.push('Pick Up Time')
      if(!data.pickUpTimeZone) missing.push('Time Zone')
      if(missing.length){ alert('Please fill: ' + missing.join(', ')); return }

      const transport = (data.whatTransporting === 'Other' || (data.whatTransporting||'').startsWith('Teams'))
        ? (data.whatTransportingOther || data.whatTransporting)
        : (data.whatTransporting || 'Not provided')

      const body = `NORA Transport Request\n\n` +
`Customer: ${data.customer || 'Not provided'}\n` +
`Caller Name & Number: ${data.callerName || 'Not provided'} ${data.callerNumber || ''}\n\n` +
`Date: ${fmtDate(data.date)}\n` +
`Pick Up Time: ${data.pickUpTime || 'Not provided'} ${data.pickUpTimeZone || ''}\n\n` +
`UNOS or Ref#: ${data.unosRef || 'Not provided'}\n` +
`O.R. Time: ${data.orTime || 'Not provided'} ${data.orTimeZone || ''}\n\n` +
`Secondary Coordinator: ${data.secondaryCoordinator || 'Not provided'}\n\n` +
`What are we transporting:\n${transport}\n\n` +
`Pick Up Location:\n${data.pickUpLocation || 'Not provided'}\n` +
`FBO: ${data.fbo || 'Not provided'}\n` +
`Tail Number: ${data.tailNumber || 'Not provided'}\n` +
`Arrival Time: ${data.arrivalTime || 'Not provided'}\n` +
`Wait & Return: ${waitRet}\n\n` +
`Drop Off Location:\n${data.dropOffLocation || 'Not provided'}\n\n` +
`P/U Onsite Contact: ${data.puOnsiteContact || 'Not provided'}\n` +
`P/U Onsite Location: ${data.puOnsiteLocation || 'Not provided'}\n\n` +
`D/O Onsite Contact: ${data.doOnsiteContact || 'Not provided'}\n` +
`D/O Onsite Location: ${data.doOnsiteLocation || 'Not provided'}\n\n` +
`Job Number Needed: ${jobNeeded}\n\n` +
`Miscellaneous Information:\n${data.miscellaneousInfo || 'Not provided'}\n\n` +
`---\nSent from NORA Mobile`

      const subject = 'NORA Transport Request'
      const MAX = 1800
      const safeBody = body.length > MAX ? body.slice(0, MAX-30) + '\n...[truncated]' : body
      const cleanBody = safeBody.replace(/\s{2,}/g, " ")
      const mailto = `mailto:${EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(cleanBody)}`
      window.location.href = mailto

      setTimeout(()=>{ localStorage.removeItem(KEY); form.reset(); toggleOther(); alert('Email opened. Form cleared.') }, 400)
    })
  </script>
<!-- NORA MAILTO BUILDER v1 -->
<script>
(function(){
  const form = document.querySelector('form');
  if(!form) return;

  function get(name) {
    const el = form.querySelector('[name="'+name+'"]');
    if (!el) return '';
    if (el.type === 'checkbox') return el.checked ? 'Yes' : 'No';
    return (el.value || '').trim();
  }
  function labelFor(el){
    if (!el) return '';
    const id = el.id;
    const viaFor = id ? (form.querySelector('label[for="'+id+'"]') || null) : null;
    const viaWrap = el.closest('label');
    const txt = (viaFor?.innerText || viaWrap?.innerText || el.name || '').trim();
    return txt.replace(/\s*[:：]\s*$/, '');
  }

  form.addEventListener('submit', function(e){
    e.preventDefault();

    // Pull important fields by likely names (adjusts if you rename)
    const puDate = get('pickupDate') || get('PickupDate') || get('date') || '';
    const puTime = get('pickupTime') || get('PickupTime') || get('time') || '';
    const puLoc  = get('pickupLocation') || get('pickupAddress') || get('pickup') || '';
    const orTime = get('orTime') || get('ORTime') || '';

    const lines = [];

    // Emphasized header block (plain text "bold")
    if (puDate || puTime || puLoc) {
      lines.push('*** PICK-UP DETAILS ***',
                 (puDate ? ('Pick-Up Date: ' + puDate) : ''),
                 (puTime ? ('Pick-Up Time: ' + puTime) : ''),
                 (puLoc  ? ('Pick-Up Location: ' + puLoc) : '')
      ).filter(Boolean);
    }
    if (orTime) {
      lines.push('*** OR TIME: ' + orTime + ' ***');
    }

    // Add the rest, double-spaced
    const skip = new Set(['pickupDate','PickupDate','date','pickupTime','PickupTime','time','pickupLocation','pickupAddress','pickup','orTime','ORTime']);
    form.querySelectorAll('input, select, textarea').forEach(function(el){
      if (!el.name || skip.has(el.name)) return;
      const v = (el.type === 'checkbox') ? (el.checked ? 'Yes' : 'No') : (el.value || '').trim();
      if (!v) return;
      const label = labelFor(el) || el.name;
      lines.push(label + ': ' + v);
    });

    // Double spacing: join with CRLF CRLF
    const body = lines.join('\\r\\n\\r\\n');

    // Build mailto
    const to = 'dispatch@noratrans.com';
    const subject = 'NORA Mobile Submission';
    const href = 'mailto:' + encodeURIComponent(to)
               + '?subject=' + encodeURIComponent(subject)
               + '&body=' + encodeURIComponent(body);

    window.location.href = href;
  }, { once:false });
})();
</script>
<!-- /NORA MAILTO BUILDER v1 -->
<!-- NORA CUSTOMER REQUIRED v1 -->
<script>
(function(){
  const form = document.querySelector('form');
  if(!form) return;

  // try to find the "Customer Name" input via label text first
  function findCustomerInput(){
    const labels = Array.from(form.querySelectorAll('label'));
    for (const lb of labels) {
      const t = (lb.innerText || "").trim();
      if (/customer\s*name/i.test(t)) {
        // for=id or wrapped input
        if (lb.htmlFor) {
          const byFor = form.querySelector('#'+CSS.escape(lb.htmlFor));
          if (byFor) return byFor;
        }
        const wrapped = lb.querySelector('input,textarea,select');
        if (wrapped) return wrapped;
      }
    }
    // fallback: common names/ids
    const candidates = ['customerName','customer_name','customer','name','CustomerName','Customer','Name'];
    for (const key of candidates) {
      const el = form.querySelector('[name="'+key+'"], #'+CSS.escape(key));
      if (el) return el;
    }
    return null;
  }

  const cust = findCustomerInput();
  if (cust) {
    // add required attributes
    cust.setAttribute('required','required');
    cust.setAttribute('aria-required','true');

    // add visible red asterisk on its label
    let lb = null;
    if (cust.id) lb = form.querySelector('label[for="'+cust.id+'"]');
    if (!lb) lb = cust.closest('label');
    if (lb && !lb.querySelector('.nora-req-asterisk')) {
      const star = document.createElement('span');
      star.className = 'nora-req-asterisk';
      star.textContent = ' *';
      lb.appendChild(star);
    }

    // guard on submit
    form.addEventListener('submit', function(ev){
      if (!cust.value || !cust.value.trim()) {
        ev.preventDefault();
        cust.focus();
        alert('Please enter the Customer Name before submitting.');
      }
    });
  }
})();
</script>
<!-- /NORA CUSTOMER REQUIRED v1 -->
<!-- NORA HEADER TAGGER v7 -->
<script>
(function(){
  var root = document;
  // Prefer an existing <header>
  var hdr = root.querySelector('header');
  // Otherwise, find a container that holds the phone link
  if (!hdr) {
    var tel = root.querySelector('a[href^="tel:"]');
    if (tel) {
      // climb up a couple of levels to find a row-like container
      var c = tel;
      for (var i=0; i<3 && c && c.parentElement; i++){ c = c.parentElement; }
      hdr = c || tel.parentElement;
    }
  }
  if (hdr && !hdr.classList.contains('nora-header-teal')) {
    hdr.classList.add('nora-header-teal');
    // Try to mark a brand element so it sizes nicely
    var brand = hdr.querySelector('.brand, h1, .logo');
    if (!brand) {
      // if NORA text is plain, wrap the first texty block
      var first = hdr.querySelector('*');
      if (first && !first.classList.contains('brand')) first.classList.add('brand');
    }
  }
})();
</script>
<!-- /NORA HEADER TAGGER v7 -->
</body>
</html>


















